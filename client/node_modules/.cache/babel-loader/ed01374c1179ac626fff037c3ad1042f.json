{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/harsh/todo_fm/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\harsh\\\\todo_fm\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{createSlice,createSelector,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';var initialState={status:'idle',entities:{}};export var fetchTodos=createAsyncThunk('todos/fetchTodos',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:5000/todos');case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}}},_callee);})));export var addNewTodo=createAsyncThunk('todos/addNewTodo',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(todo){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('http://localhost:5000/todo',todo);case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());export var toggleTodo=createAsyncThunk('todos/toggleTodo',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(todo){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.put('http://localhost:5000/todo',todo);case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}());export var deleteTodo=createAsyncThunk('todos/deleteTodo',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete('http://localhost:5000/todo/'+id);case 2:res=_context4.sent;return _context4.abrupt(\"return\",res.data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}());export var deleteCompletedTodos=createAsyncThunk('todos/deleteCompletedTodos',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.delete('http://localhost:5000/todos');case 2:res=_context5.sent;return _context5.abrupt(\"return\",res.data);case 4:case\"end\":return _context5.stop();}}},_callee5);})));var todosSlice=createSlice({name:'todos',initialState:initialState,reducers:{},extraReducers:function extraReducers(builder){builder.addCase(fetchTodos.pending,function(state,action){state.status='loading';}).addCase(fetchTodos.fulfilled,function(state,action){var todos={};action.payload.forEach(function(todo){todos[todo._id]=todo;});state.entities=todos;state.status='idle';}).addCase(addNewTodo.fulfilled,function(state,action){var todo=action.payload;state.entities[todo._id]=todo;}).addCase(toggleTodo.fulfilled,function(state,action){var id=action.payload;state.entities[id].completed=!state.entities[id].completed;}).addCase(deleteTodo.fulfilled,function(state,action){var id=action.payload;id&&delete state.entities[id];}).addCase(deleteCompletedTodos.fulfilled,function(state,action){var res=action.payload;res&&Object.values(state.entities).forEach(function(todo){if(todo.completed){delete state.entities[todo._id];}});});}});export default todosSlice.reducer;// selectors \nexport var selectFilteredTodos=createSelector(function(state){return state.todos.entities;},function(state){return state.filters.status;},function(todos,filter){if(filter=='all'){return Object.values(todos);}if(filter=='active'){var list=Object.values(todos).filter(function(todo){return!todo.completed;});return list;}if(filter=='completed'){var _list=Object.values(todos).filter(function(todo){return todo.completed;});return _list;}});","map":{"version":3,"sources":["C:/Users/harsh/todo_fm/client/src/store/todosSlice.js"],"names":["createSlice","createSelector","createAsyncThunk","axios","initialState","status","entities","fetchTodos","get","res","data","addNewTodo","todo","post","toggleTodo","put","deleteTodo","id","delete","deleteCompletedTodos","todosSlice","name","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","todos","payload","forEach","_id","completed","Object","values","reducer","selectFilteredTodos","filters","filter","list"],"mappings":"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","sourcesContent":["import { createSlice, createSelector, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    status: 'idle',\r\n    entities: {},\r\n}\r\n\r\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\r\n    const res = await axios.get('http://localhost:5000/todos')\r\n    return res.data\r\n})\r\n\r\nexport const addNewTodo = createAsyncThunk('todos/addNewTodo', async todo => {\r\n    const res = await axios.post('http://localhost:5000/todo', todo)\r\n    return res.data \r\n})\r\n\r\nexport const toggleTodo = createAsyncThunk('todos/toggleTodo', async todo => {\r\n    const res = await axios.put('http://localhost:5000/todo', todo)\r\n    return res.data \r\n})\r\n\r\nexport const deleteTodo = createAsyncThunk('todos/deleteTodo', async id => {\r\n    const res = await axios.delete('http://localhost:5000/todo/'+id)\r\n    return res.data\r\n})\r\n\r\nexport const deleteCompletedTodos = createAsyncThunk('todos/deleteCompletedTodos', async () => {\r\n    const res = await axios.delete('http://localhost:5000/todos')\r\n    return res.data\r\n})\r\n\r\nconst todosSlice = createSlice({\r\n    name: 'todos',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: builder => {\r\n        builder\r\n            .addCase(fetchTodos.pending, (state, action) => {\r\n                state.status = 'loading'\r\n            })\r\n            .addCase(fetchTodos.fulfilled, (state, action) => {\r\n                let todos = {}\r\n                action.payload.forEach(todo => {\r\n                    todos[todo._id] = todo\r\n                })\r\n                state.entities = todos \r\n                state.status = 'idle'\r\n            })\r\n            .addCase(addNewTodo.fulfilled, (state, action) => {\r\n                let todo = action.payload\r\n                state.entities[todo._id] = todo\r\n            })\r\n            .addCase(toggleTodo.fulfilled, (state, action) => {\r\n                let id = action.payload\r\n                state.entities[id].completed = !state.entities[id].completed\r\n            })\r\n            .addCase(deleteTodo.fulfilled, (state, action) => {\r\n                let id = action.payload\r\n                id && delete state.entities[id]\r\n            })\r\n            .addCase(deleteCompletedTodos.fulfilled, (state, action) => {\r\n                let res = action.payload\r\n                res && \r\n                    Object.values(state.entities).forEach(todo => {\r\n                        if(todo.completed) {\r\n                            delete state.entities[todo._id]\r\n                        }\r\n                    })\r\n            })\r\n    }\r\n})\r\n\r\nexport default todosSlice.reducer\r\n\r\n// selectors \r\nexport const selectFilteredTodos = createSelector(\r\n    state => state.todos.entities,\r\n    state => state.filters.status,\r\n    (todos, filter) => {\r\n        if(filter=='all') {\r\n            return Object.values(todos)\r\n        }\r\n        if(filter=='active') {\r\n            let list = Object.values(todos).filter(todo => !todo.completed)\r\n            return list \r\n        }\r\n        if(filter=='completed') {\r\n            let list = Object.values(todos).filter(todo => todo.completed)\r\n            return list \r\n        }\r\n    }\r\n)"]},"metadata":{},"sourceType":"module"}