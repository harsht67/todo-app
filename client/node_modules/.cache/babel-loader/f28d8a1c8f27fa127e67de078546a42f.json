{"ast":null,"code":"import { createSlice, createSelector, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  status: 'idle',\n  entities: ''\n};\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\n  const res = await axios.get('http://localhost:5000/todos');\n  return res.data;\n});\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    todoAdded(state, action) {\n      const todo = action.payload;\n      state[todo.id] = todo;\n    },\n\n    todoDeleted(state, action) {\n      const id = action.payload;\n      delete state[id];\n    },\n\n    todoToggled(state, action) {\n      const id = action.payload;\n      state[id].completed = !state[id].completed;\n    },\n\n    completedTodosDeleted(state, action) {\n      Object.values(state).forEach(todo => {\n        if (todo.completed) {\n          delete state[todo.id];\n        }\n      });\n    }\n\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchTodos.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchTodos.fulfilled, (state, action) => {\n      let todos = {};\n      action.payload.forEach(todo => {\n        todos[todo._id] = todo;\n      });\n      state.entities = todos;\n      state.status = 'idle';\n    });\n  }\n});\nexport const {\n  todoAdded,\n  todoDeleted,\n  todoToggled,\n  completedTodosDeleted\n} = todosSlice.actions;\nexport default todosSlice.reducer; // selectors \n\nexport const selectFilteredTodos = createSelector(state => state.todos.entities, state => state.filters.status, (todos, filter) => {\n  if (filter == 'all') {\n    return Object.values(todos);\n  }\n\n  if (filter == 'active') {\n    let list = Object.values(todos).filter(todo => !todo.completed);\n    return list;\n  }\n\n  if (filter == 'completed') {\n    let list = Object.values(todos).filter(todo => todo.completed);\n    return list;\n  }\n});","map":{"version":3,"sources":["C:/Users/harsh/todo_fm/client/src/store/todosSlice.js"],"names":["createSlice","createSelector","createAsyncThunk","axios","initialState","status","entities","fetchTodos","res","get","data","todosSlice","name","reducers","todoAdded","state","action","todo","payload","id","todoDeleted","todoToggled","completed","completedTodosDeleted","Object","values","forEach","extraReducers","builder","addCase","pending","fulfilled","todos","_id","actions","reducer","selectFilteredTodos","filters","filter","list"],"mappings":"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","sourcesContent":["import { createSlice, createSelector, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    status: 'idle',\r\n    entities: '',\r\n}\r\n\r\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\r\n    const res = await axios.get('http://localhost:5000/todos')\r\n    return res.data\r\n})\r\n\r\nconst todosSlice = createSlice({\r\n    name: 'todos',\r\n    initialState,\r\n    reducers: {\r\n        todoAdded(state, action) {\r\n            const todo = action.payload\r\n            state[todo.id] = todo\r\n        },\r\n        todoDeleted(state, action) {\r\n            const id = action.payload\r\n            delete state[id]\r\n        },\r\n        todoToggled(state, action) {\r\n            const id = action.payload\r\n            state[id].completed = !state[id].completed\r\n        },\r\n        completedTodosDeleted(state, action) {\r\n            Object.values(state).forEach(todo => {\r\n                if(todo.completed) {\r\n                    delete state[todo.id]\r\n                }\r\n            })\r\n        }\r\n    },\r\n    extraReducers: builder => {\r\n        builder\r\n            .addCase(fetchTodos.pending, (state, action) => {\r\n                state.status = 'loading'\r\n            })\r\n            .addCase(fetchTodos.fulfilled, (state, action) => {\r\n                let todos = {}\r\n                action.payload.forEach(todo => {\r\n                    todos[todo._id] = todo\r\n                })\r\n                state.entities = todos \r\n                state.status = 'idle'\r\n            })\r\n    }\r\n})\r\n\r\nexport const {todoAdded, todoDeleted, todoToggled, completedTodosDeleted} = todosSlice.actions\r\n\r\nexport default todosSlice.reducer\r\n\r\n// selectors \r\nexport const selectFilteredTodos = createSelector(\r\n    state => state.todos.entities,\r\n    state => state.filters.status,\r\n    (todos, filter) => {\r\n        if(filter=='all') {\r\n            return Object.values(todos)\r\n        }\r\n        if(filter=='active') {\r\n            let list = Object.values(todos).filter(todo => !todo.completed)\r\n            return list \r\n        }\r\n        if(filter=='completed') {\r\n            let list = Object.values(todos).filter(todo => todo.completed)\r\n            return list \r\n        }\r\n    }\r\n)"]},"metadata":{},"sourceType":"module"}